<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test 1.X - Lister toutes les images ayant un alt (Shadow DOM)</title>
    <link
      rel="shortcut icon"
      href="../../assets/images/favicon.png"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="../../assets/css/styles.css" />
  </head>
  <body class="page-test">
    <header role="banner">
      <div class="container">
        <a href="javascript:history.back()" class="back-link" id="back-link">
          <span aria-hidden="true">← </span>Retour à la page précédente
        </a>
        <h1>Test 1.X - Lister toutes les images ayant un alt (Shadow DOM)</h1>
      </div>
    </header>

    <main role="main" class="container">
      <section class="test-page-section">
        <div class="test-info">
          <h2>Informations sur le test</h2>
          <p>
            Cette page est utilisée pour tester les bookmarklets d'accessibilité
            RGAA 4.1.2.
          </p>
          <p>
            Nom du fichier :
            1.X-lister-toutes-les-images-ayant-un-alt-test-shadow-dom.html
          </p>
          <p>
            Description du test : Cette page contient des images avec différents
            états d'attribut <code>alt</code> dans le DOM principal et dans des
            Shadow DOM pour tester les critères d'accessibilité RGAA 4.1.2
            concernant la détection de toutes les images ayant un attribut
            <code>alt</code> (y compris les images avec <code>alt</code> vide).
          </p>
        </div>

        <div class="test-content">
          <h2>Contenu du test</h2>

          <p>Cette page contient :</p>
          <ul>
            <li>
              Des images avec un attribut <code>alt</code> rempli dans le DOM
              principal (doivent être détectées)
            </li>
            <li>
              Des images avec un attribut <code>alt</code> vide dans le DOM
              principal (doivent être détectées)
            </li>
            <li>
              Des images sans attribut <code>alt</code> dans le DOM principal
              (ne doivent PAS être détectées)
            </li>
            <li>Des éléments similaires dans des Shadow DOM</li>
            <li>
              Des images avec différents états dans des Shadow DOM imbriqués
            </li>
          </ul>

          <h3>Images avec alt rempli dans le DOM principal</h3>

          <p>Test avec image ayant un <code>alt</code> rempli :</p>
          <img
            src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgMTwvdGV4dD48L3N2Zz4="
            alt="Image de test avec alt rempli"
            width="100"
            height="100"
          />
          <p class="test-note">
            Image avec alt="Image de test avec alt rempli" (doit être détectée)
          </p>

          <p>Test avec image ayant un <code>alt</code> rempli différent :</p>
          <img
            src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgMjwvdGV4dD48L3N2Zz4="
            alt="Description détaillée de l'image"
            width="100"
            height="100"
          />
          <p class="test-note">
            Image avec alt="Description détaillée de l'image" (doit être
            détectée)
          </p>

          <h3>
            Images avec alt vide dans le DOM principal (doivent être détectées)
          </h3>

          <p>Test avec image ayant un <code>alt</code> vide :</p>
          <img
            src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2ZmMDAwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgMzwvdGV4dD48L3N2Zz4="
            alt=""
            width="100"
            height="100"
          />
          <p class="test-note">Image avec alt="" (doit être détectée)</p>

          <h3>
            Images sans alt dans le DOM principal (ne doivent PAS être
            détectées)
          </h3>

          <p>Test avec image sans attribut <code>alt</code> :</p>
          <img
            src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2ZmMDAwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgNDwvdGV4dD48L3N2Zz4="
            width="100"
            height="100"
          />
          <p class="test-note">
            Image sans attribut alt (ne doit PAS être détectée)
          </p>

          <h3>Composants avec Shadow DOM</h3>
          <div id="shadow-component-1"></div>
          <div id="shadow-component-2"></div>
          <div id="shadow-component-3"></div>
          <div id="shadow-component-4"></div>
          <div id="shadow-component-nested"></div>
        </div>
      </section>
    </main>
    <footer role="contentinfo">
      <div class="container">
        <p>
          © <span id="currentYear"></span> -
          <a href="https://www.numerik-ea.fr">numerik-ea</a>
          |
          <a
            href="https://github.com/numerik-ea/bookmarklets-pour-le-rgaa-4.1.2"
          >
            Contribuer à ce site
          </a>
        </p>
      </div>
    </footer>
    <script src="../../assets/js/test-page.js"></script>
    <script>
      // Shadow DOM 1 : Contient une image avec alt rempli
      (function () {
        const host = document.getElementById('shadow-component-1');
        const shadowRoot = host.attachShadow({ mode: 'open' });
        shadowRoot.innerHTML = `
                <style>
                    .shadow-container { padding: 10px; margin: 10px 0; border: 1px solid #999; }
                    h4 { margin-top: 0; }
                    .test-note { font-size: 12px; color: #666; margin-top: 5px; }
                </style>
                <div class="shadow-container">
                    <h4>Shadow DOM 1 - Image avec alt rempli</h4>
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgU0QxPC90ZXh0Pjwvc3ZnPg==" alt="Image Shadow DOM avec alt rempli" width="100" height="100" />
                    <p class="test-note">Image avec alt rempli dans Shadow DOM (doit être détectée)</p>
                </div>
            `;
      })();

      // Shadow DOM 2 : Contient une image avec alt vide
      (function () {
        const host = document.getElementById('shadow-component-2');
        const shadowRoot = host.attachShadow({ mode: 'open' });
        shadowRoot.innerHTML = `
                <style>
                    .shadow-container { padding: 10px; margin: 10px 0; border: 1px solid #999; }
                    h4 { margin-top: 0; }
                    .test-note { font-size: 12px; color: #666; margin-top: 5px; }
                </style>
                <div class="shadow-container">
                    <h4>Shadow DOM 2 - Image avec alt vide</h4>
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2ZmMDAwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgU0QyPC90ZXh0Pjwvc3ZnPg==" alt="" width="100" height="100" />
                    <p class="test-note">Image avec alt="" dans Shadow DOM (doit être détectée)</p>
                </div>
            `;
      })();

      // Shadow DOM 3 : Contient une image sans alt
      (function () {
        const host = document.getElementById('shadow-component-3');
        const shadowRoot = host.attachShadow({ mode: 'open' });
        shadowRoot.innerHTML = `
                <style>
                    .shadow-container { padding: 10px; margin: 10px 0; border: 1px solid #999; }
                    h4 { margin-top: 0; }
                    .test-note { font-size: 12px; color: #666; margin-top: 5px; }
                </style>
                <div class="shadow-container">
                    <h4>Shadow DOM 3 - Image sans alt</h4>
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2ZmMDAwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgU0QzPC90ZXh0Pjwvc3ZnPg==" width="100" height="100" />
                    <p class="test-note">Image sans alt dans Shadow DOM (ne doit PAS être détectée)</p>
                </div>
            `;
      })();

      // Shadow DOM 4 : Contient plusieurs images avec différents états
      (function () {
        const host = document.getElementById('shadow-component-4');
        const shadowRoot = host.attachShadow({ mode: 'open' });
        shadowRoot.innerHTML = `
                <style>
                    .shadow-container { padding: 10px; margin: 10px 0; border: 1px solid #999; }
                    h4 { margin-top: 0; }
                    .test-note { font-size: 12px; color: #666; margin-top: 5px; }
                    .image-item { margin: 10px 0; }
                </style>
                <div class="shadow-container">
                    <h4>Shadow DOM 4 - Plusieurs images avec différents états</h4>
                    <div class="image-item">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgU0Q0LTE8L3RleHQ+PC9zdmc+" alt="Première image avec alt" width="100" height="100" />
                        <p class="test-note">Image avec alt rempli (doit être détectée)</p>
                    </div>
                    <div class="image-item">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgU0Q0LTI8L3RleHQ+PC9zdmc+" alt="" width="100" height="100" />
                        <p class="test-note">Image avec alt="" (doit être détectée)</p>
                    </div>
                    <div class="image-item">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2ZmMDAwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgU0Q0LTM8L3RleHQ+PC9zdmc+" width="100" height="100" />
                        <p class="test-note">Image sans alt (ne doit PAS être détectée)</p>
                    </div>
                </div>
            `;
      })();

      // Shadow DOM imbriqué : Contient des images avec différents états dans un shadow root qui contient lui-même un shadow root
      (function () {
        const host = document.getElementById('shadow-component-nested');
        const shadowRoot1 = host.attachShadow({ mode: 'open' });
        shadowRoot1.innerHTML = `
                <style>
                    .container { padding: 10px; margin: 10px 0; border: 1px solid #999; }
                    h4 { margin-top: 0; }
                    .test-note { font-size: 12px; color: #666; margin-top: 5px; }
                    .image-item { margin: 10px 0; }
                </style>
                <div class="container">
                    <h4>Shadow DOM imbriqué (niveau 1) - Images avec différents états</h4>
                    <div class="image-item">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTjEtMTwvdGV4dD48L3N2Zz4=" alt="Image niveau 1 avec alt" width="100" height="100" />
                        <p class="test-note">Image niveau 1 avec alt rempli (doit être détectée)</p>
                    </div>
                    <div class="image-item">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2ZmMDAwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTjEtMjwvdGV4dD48L3N2Zz4=" alt="" width="100" height="100" />
                        <p class="test-note">Image niveau 1 avec alt="" (doit être détectée)</p>
                    </div>
                    <div id="nested-shadow-host"></div>
                </div>
            `;

        // Shadow DOM de niveau 2
        const nestedHost = shadowRoot1.querySelector('#nested-shadow-host');
        const shadowRoot2 = nestedHost.attachShadow({ mode: 'open' });
        shadowRoot2.innerHTML = `
                <style>
                    .nested-container { padding: 10px; margin: 10px 0; border: 1px solid #666; }
                    h5 { margin-top: 0; }
                    .test-note { font-size: 12px; color: #666; margin-top: 5px; }
                    .image-item { margin: 10px 0; }
                </style>
                <div class="nested-container">
                    <h5>Shadow DOM imbriqué (niveau 2) - Images avec différents états</h5>
                    <div class="image-item">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTjItMTwvdGV4dD48L3N2Zz4=" alt="Image niveau 2 avec alt" width="100" height="100" />
                        <p class="test-note">Image niveau 2 avec alt rempli (doit être détectée)</p>
                    </div>
                    <div class="image-item">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTjItMjwvdGV4dD48L3N2Zz4=" alt="" width="100" height="100" />
                        <p class="test-note">Image niveau 2 avec alt="" (doit être détectée)</p>
                    </div>
                </div>
            `;
      })();
    </script>
  </body>
</html>
