javascript:(function () { function getAllShadowRoots(root = document) { const shadowRoots = []; const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT); let node; while ((node = walker.nextNode())) { if (node.shadowRoot) { shadowRoots.push(node.shadowRoot); shadowRoots.push(...getAllShadowRoots(node.shadowRoot)); } } return shadowRoots; } function querySelectorAllInAllRoots(selector) { const allRoots = [document, ...getAllShadowRoots()]; const allElements = []; allRoots.forEach((root) => { const elements = Array.from(root.querySelectorAll(selector)); allElements.push(...elements); }); return allElements; } const elements = querySelectorAllInAllRoots('[lang]'); if (elements.length === 0) { console.clear(); console.log("Aucun élément avec l'attribut lang trouvé."); alert( `Aucun élément avec l'attribut lang trouvé :\n` + `8.3 NC, 8.4 NA\n\n` + `ATTENTION : Vérifier les potentiels changements de langue dans la page sans l'attribut lang.` ); return; } if (elements.length === 1 && elements[0].tagName.toLowerCase() === 'html') { const lang = elements[0].getAttribute('lang'); console.clear(); console.log('========================================'); console.log('Langue par défaut de la page :'); console.log('========================================'); console.log(elements[0]); alert( `Langue par défaut de la page : <html lang="${lang}">\n\n` + `Aucun autre élément avec l'attribut lang trouvé.\n\n` + `Vérifier les potentiels changements de langue dans la page sans l'attribut lang.` ); return; } console.clear(); console.log('========================================'); console.log(`${elements.length} éléments avec l'attribut lang trouvés :`); console.log('========================================'); elements.forEach((el) => { if (el.tagName.toLowerCase() !== 'html') { el.style.border = '2px solid yellow'; el.style.outline = '2px solid blue'; el.style.outlineOffset = '2px'; el.style.background = 'red'; el.style.backgroundColor = 'red'; const langValue = el.getAttribute('lang') || ''; const label = document.createElement('div'); label.textContent = `lang="${langValue}"`; label.style.position = 'absolute'; label.style.top = '0'; label.style.left = '0'; label.style.backgroundColor = 'yellow'; label.style.color = 'black'; label.style.padding = '2px 5px'; label.style.fontSize = '12px'; label.style.fontWeight = 'bold'; label.style.zIndex = '10000'; label.style.pointerEvents = 'none'; const computedStyle = window.getComputedStyle(el); if (computedStyle.position === 'static') { el.style.position = 'relative'; } el.appendChild(label); } console.log(el); }); alert( `${elements.length} éléments avec l'attribut lang trouvés.\n\n` + `ATTENTION : Vérifier les potentiels changements de langue dans la page sans l'attribut lang.\n\n` + `Voir la console pour plus de détails.` ); })();