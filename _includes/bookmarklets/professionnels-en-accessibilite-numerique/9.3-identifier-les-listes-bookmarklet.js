javascript:(function getLists() { function getAllShadowRoots(root = document) { const shadowRoots = []; const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT); let node; while ((node = walker.nextNode())) { if (node.shadowRoot) { shadowRoots.push(node.shadowRoot); shadowRoots.push(...getAllShadowRoots(node.shadowRoot)); } } return shadowRoots; } function querySelectorAllInAllRoots(selector) { const allRoots = [document.body, ...getAllShadowRoots()]; const allElements = []; allRoots.forEach((root) => { const elements = Array.from(root.querySelectorAll(selector)); allElements.push(...elements); }); return allElements; } const lists = querySelectorAllInAllRoots('ul, ol'); const numberOfLists = lists.length; if (numberOfLists === 0) { alert('Pas de listes sur la page.'); return; } let message = numberOfLists + ' listes sur la page'; if (numberOfLists === 1) { message = message.replace('listes', 'liste'); } alert(message + '.\nVoir la console pour plus de deÌtails.'); console.clear(); console.log(message + ' :'); lists.forEach((list) => { list.style.border = '1px solid yellow'; list.style.outline = '1px solid blue'; list.style.outlineOffset = '2px'; list.style.background = 'red'; list.style.backgroundColor = 'red'; console.log(list); }); })();