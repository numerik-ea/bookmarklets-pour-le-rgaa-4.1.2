javascript:(function checkHeaderNavMainFooter() { function getAllShadowRoots(root = document) { const shadowRoots = []; const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT); let node; while ((node = walker.nextNode())) { if (node.shadowRoot) { shadowRoots.push(node.shadowRoot); shadowRoots.push(...getAllShadowRoots(node.shadowRoot)); } } return shadowRoots; } function querySelectorInRoot(selector, root) { return root.querySelector(selector); } function querySelectorAllInRoot(selector, root) { return Array.from(root.querySelectorAll(selector)); } let message = ''; const allRoots = [document, ...getAllShadowRoots()]; const shadowRootCount = allRoots.length - 1; const elements = ['header', 'nav', 'main', 'footer']; elements.forEach((tagName) => { let count = 0; let countInDocument = 0; let countInShadow = 0; countInDocument = querySelectorAllInRoot(tagName, document).length; count += countInDocument; allRoots.slice(1).forEach((shadowRoot) => { const shadowCount = querySelectorAllInRoot(tagName, shadowRoot).length; countInShadow += shadowCount; count += shadowCount; }); if (count > 0) { const locationParts = []; if (countInDocument > 0) { locationParts.push(`${countInDocument} dans le document`); } if (countInShadow > 0) { locationParts.push(`${countInShadow} dans shadow DOM`); } const location = locationParts.length > 0 ? ` (${locationParts.join(', ')})` : ''; message += `<${tagName}> trouvé : ${count}${location}\n`; } else { message += `<${tagName}> non trouvé\n`; } }); if (shadowRootCount > 0) { message += `\n${shadowRootCount} shadow root(s) analysé(s).\n`; } alert(message + '\nVoir la console pour plus de détails.'); console.clear(); console.log(message + ' :'); allRoots.forEach((root, index) => { const rootName = index === 0 ? 'Document principal' : `Shadow root ${index}`; const elements = querySelectorAllInRoot('header, nav, main, footer', root); if (elements.length > 0) { console.log(`\n${rootName}:`); elements.forEach((element) => console.log(element)); } }); })();